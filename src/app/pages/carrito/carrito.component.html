<div class="offcanvas offcanvas-end" tabindex="-1" id="carritoOffcanvas"
     style="width: 420px; background-color: #836d59; font-family: 'Montserrat';">
  <div class="offcanvas-header border-bottom">
    <h5 class="offcanvas-title" style="font-family: 'Exo'; color: #DFCFC2;">Carrito</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>

  <div class="offcanvas-body d-flex flex-column justify-content-between">

    <!-- Si está vacío -->
    <div *ngIf="carrito.length === 0" class="text-center mt-5">
      <p style="color: #DFCFC2;">El carrito está vacío.</p>
    </div>

    <!-- Si hay productos -->
    <div *ngIf="carrito.length > 0" class="mb-3">
      <div *ngFor="let item of carrito" class="p-3 rounded mb-3" style="background-color: #f5f0ea; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div class="d-flex justify-content-between align-items-center">
          <div>

            <!--<img [src]="'images/productos/' + {{item.producto.url}}">
          -->
            <h6 class="mb-1 fw-bold" style="color: #836d59;">{{ item.producto.nombre }}</h6>
            <small class="text-muted">Precio unitario: ${{ item.producto.precio }}</small>
          </div>
          <button class="btn btn-sm btn-outline-danger" (click)="eliminarProducto(item)">✕</button>
        </div>

        <div class="d-flex justify-content-between align-items-center mt-2">
          <div class="d-flex align-items-center gap-2">
            <button class="btn btn-sm btn-outline-dark py-0 px-2" (click)="disminuirCantidad(item)">−</button>
            <span>{{ item.cantidad }}</span>
            <button class="btn btn-sm btn-outline-dark py-0 px-2" (click)="aumentarCantidad(item)">+</button>
          </div>
          <div class="fw-bold text-end">Subtotal: ${{ item.producto.precio * item.cantidad }}</div>
        </div>
      </div>
    </div>

    <!-- Total y acciones -->
    <div *ngIf="carrito.length > 0" class="mt-auto border-top pt-3">
      <div class="fw-bold fs-5 mb-3 text-end" style="color: #DFCFC2;">
        Total: ${{ calcularTotal() }}
      </div>

      <div class="d-flex justify-content-between">
        <button class="btn" style="background-color: #DFCFC2;" (click)="vaciarCarrito()">Vaciar carrito</button>
        <button class="btn" style="background-color: #DFCFC2;" (click)="finalizarCompra()">Finalizar compra</button>
      </div>
    </div>

  </div>
</div>
